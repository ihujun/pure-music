{"version":3,"sources":["webpack:///./node_modules/_good-storage@1.1.0@good-storage/dist/storage.esm.js","webpack:///./src/common/js/cache.js","webpack:///./src/common/js/singer.js","webpack:///./src/data/search.js","webpack:///src/components/search/search.vue","webpack:///./src/components/search/search.vue?37ca","webpack:///./src/components/search/search.vue"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","store","version","storage","window","localStorage","session","sessionStorage","api","set","val","this","disabled","undefined","remove","setItem","JSON","stringify","serialize","get","def","parse","e","deserialize","getItem","has","removeItem","clear","getAll","ret","forEach","callback","testKey","storage_esm","SEARCH_KEY","SEARCH_MAX_LEN","loadSearch","Singer","_ref","id","name","classCallCheck_default","avatar","getSearch","query","page","PARAMS","format","w","n","p","jsonp","url","params","search_search","data","hotkeys","result","hasMore","wrapperHeight","historyQuery","components","created","getHotKey","mounted","document","documentElement","clientHeight","$refs","wrapper","getBoundingClientRect","top","methods","extends_default","vuex_esm","setSinger","_this","g_tk","uin","inCharset","outCharset","notice","platform","needNewCode","_","then","res","code","config","hotkey","slice","search","_this2","initResult","checkMore","arr","compare","maxLen","index","searches","item","findIndex","splice","unshift","pop","saveSearch","zhida","singerid","push","type","song","initSongs","list","concat","musicData","songid","albummid","curnum","curpage","totalnum","setQuery","trim","clearHistory","_this3","$messagebox","confirm","message","title","confirmButtonText","cancelButtonText","action","catch","err","deleteHistory","deleteSearch","loadBottom","_this4","loadmore","onBottomLoaded","singerImg","singermid","selectItem","singer","js_singer","singername","$router","path","insertSong","components_search_search","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","cancel-text","placeholder","nativeOn","keyup","$event","indexOf","_k","keyCode","model","value","$$v","expression","directives","rawName","ref","style","height","bottom-method","bottom-all-loaded","auto-fill","_l","on","click","_e","slot","src","width","_v","_s","staticStyle","border-radius","songnum","albumnum","k","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2KAIAA,EAAAC,OAAAC,QAAA,SAAAC,GAAmD,QAAAC,EAAA,EAAgBA,EAAAC,UAAAC,OAAsBF,IAAA,CAAO,IAAAG,EAAAF,UAAAD,GAA2B,QAAAI,KAAAD,EAA0BN,OAAAQ,UAAAC,eAAAC,KAAAJ,EAAAC,KAAyDL,EAAAK,GAAAD,EAAAC,IAAiC,OAAAL,GAK/OS,GAEAC,QAAA,QACAC,QAAAC,OAAAC,aACAC,SACAH,QAAAC,OAAAG,iBAIAC,GACAC,IAAA,SAAAZ,EAAAa,GACA,IAAAC,KAAAC,SAGA,YAAAC,IAAAH,EACAC,KAAAG,OAAAjB,IAEAc,KAAAR,QAAAY,QAAAlB,EAkDA,SAAAa,GACA,OAAAM,KAAAC,UAAAP,GAnDAQ,CAAAR,IACAA,IAEAS,IAAA,SAAAtB,EAAAuB,GACA,GAAAT,KAAAC,SACA,OAAAQ,EAEA,IAAAV,EA+CA,SAAAA,GACA,oBAAAA,EACA,OAEA,IACA,OAAAM,KAAAK,MAAAX,GACG,MAAAY,GACH,OAAAZ,QAAAG,GAtDAU,CAAAZ,KAAAR,QAAAqB,QAAA3B,IACA,YAAAgB,IAAAH,EAAAU,EAAAV,GAEAe,IAAA,SAAA5B,GACA,YAAAgB,IAAAF,KAAAQ,IAAAtB,IAEAiB,OAAA,SAAAjB,GACAc,KAAAC,UAGAD,KAAAR,QAAAuB,WAAA7B,IAEA8B,MAAA,WACAhB,KAAAC,UAGAD,KAAAR,QAAAwB,SAEAC,OAAA,WACA,GAAAjB,KAAAC,SACA,YAEA,IAAAiB,KAIA,OAHAlB,KAAAmB,QAAA,SAAAjC,EAAAa,GACAmB,EAAAhC,GAAAa,IAEAmB,GAEAC,QAAA,SAAAC,GACA,IAAApB,KAAAC,SAGA,QAAAnB,EAAA,EAAmBA,EAAAkB,KAAAR,QAAAR,OAAyBF,IAAA,CAC5C,IAAAI,EAAAc,KAAAR,QAAAN,IAAAJ,GACAsC,EAAAlC,EAAAc,KAAAQ,IAAAtB,OAKAR,EAAAY,EAAAO,GAEAnB,EAAAY,EAAAK,QAAAE,GAiBA,IACA,IAAAwB,EAAA,cACA/B,EAAAQ,IAAAuB,KACA/B,EAAAkB,IAAAa,SACA/B,EAAAW,UAAA,GAEAX,EAAAa,OAAAkB,GACC,MAAAV,GACDrB,EAAAW,UAAA,EAGe,IAAAqB,EAAA,ECpGTC,EAAa,aACbC,EAAiB,GAoDhB,SAASC,IACd,OAAOjC,EAAQgB,IAAIe,+BCxDAG,EACnB,SAAAA,EAAAC,GAAwB,IAAXC,EAAWD,EAAXC,GAAIC,EAAOF,EAAPE,KAAOC,IAAA9B,KAAA0B,GACtB1B,KAAK4B,GAAKA,EACV5B,KAAK6B,KAAOA,EACZ7B,KAAK+B,OAAL,sDAAoEH,EAApE,gDCDG,SAASI,EAAWC,EAAOC,GAChC,IACMC,GACJC,OAAQ,QACRC,EAAGJ,EACHK,EAAG,GACHC,EAAGL,GAGL,OAAOM,aAAOC,IARF,oDAQYC,OAAQP,EAAQf,SADnB,kBC4EvB,IAAAuB,GAEAC,KAFA,WAGA,OACAC,WACAZ,MAAA,GACAC,KAAA,EACAY,UACAC,SAAA,EACAC,cAAA,EACAC,aAAAxB,MAGAyB,cAGAC,QAhBA,WAiBAnD,KAAAoD,aAGAC,QApBA,WAqBArD,KAAAgD,cAAAM,SAAAC,gBAAAC,aAAAxD,KAAAyD,MAAAC,QAAAC,wBAAAC,KAGAC,QAAAC,OACAnF,OAAAoF,EAAA,EAAApF,EACAqF,UAAA,eAEArF,OAAAoF,EAAA,EAAApF,EAAA,gBAIAyE,UARA,WAQA,IAAAa,EAAAjE,KDxFSwC,aAAQC,IAbH,qDAaaC,QAXvBwB,KAAM,KACNC,IAAK,EACL/B,OAAQ,QACRgC,UAAW,QACXC,WAAY,QACZC,OAAQ,EACRC,SAAU,KACVC,YAAa,EACbC,EAAG,eAGoCrD,SADpB,kBC0FvBsD,KAAA,SAAAC,GACAA,EAAAC,OAAAC,EAAA,IACAZ,EAAApB,QAAA8B,EAAA/B,KAAAkC,OAAAC,MAAA,UAMAC,OAjBA,SAiBA/C,EAAAC,GAAA,IAAA+C,EAAAjF,KACMgC,EAANC,EAAAC,GAAAwC,KAAA,SAAAC,GACAM,EAAAnC,OAAAmC,EAAAC,WAAAP,EAAA/B,MACAqC,EAAAE,UAAAR,EAAA/B,QHnGO,SAAoBX,GACzB,IAtBmBmD,EAAKrF,EAAKsF,EAASC,EAChCC,EAqBFC,EAAWhG,EAAQgB,IAAIe,MAtBHxB,EAuBFkC,EAvBOoD,EAuBA,SAACI,GAC5B,OAAOA,IAASxD,GAxBoBqD,EAyBnC9D,EAvBW,KADR+D,GADaH,EAuBPI,GAtBME,UAAUL,MAIxBE,EAAQ,GACVH,EAAIO,OAAOJ,EAAO,GAEpBH,EAAIQ,QAAQ7F,GACRuF,GAAUF,EAAIpG,OAASsG,GACzBF,EAAIS,OAgBNrG,EAAQM,IAAIyB,EAAYiE,GGmGpBM,CAAN7D,IAIAiD,WA7BA,SA6BAtC,GACA,IAAA1B,KAIA,GAHA0B,EAAAmD,OAAAnD,EAAAmD,MAAAC,UACA9E,EAAA+E,KAAAnC,OAAAlB,EAAAmD,OAAAG,KAAA,YAEAtD,EAAAuD,KAAA,CACA,IAAAf,EAAApF,KAAAoG,UAAAxD,EAAAuD,KAAAE,MACAnF,IAAAoF,OAAAlB,GAEA,OAAAlE,GAGAkF,UAzCA,SAyCAC,GACA,IAAAnF,KAMA,OALAmF,EAAAlF,QAAA,SAAAoF,GACAA,EAAAC,QAAAD,EAAAE,UACAvF,EAAA+E,KAAAtH,OAAAwH,EAAA,EAAAxH,CAAA4H,MAGArF,GAIAiE,UApDA,SAoDAvC,GACA,IAAAuD,EAAAvD,EAAAuD,OACAA,EAAAE,KAAArH,QAAAmH,EAAAO,OAAA,GAAAP,EAAAQ,QAAAR,EAAAS,YACA5G,KAAA+C,SAAA,IAKA8D,SA5DA,SA4DA5E,GACAA,IAAA6E,OACA9G,KAAAiC,QACAjC,KAAAgF,OAAA/C,EAAA,MACAjC,KAAAiD,aAAAxB,KAIAsF,aApEA,WAoEA,IAAAC,EAAAhH,KACAA,KAAAiH,YAAAC,QAAA,IACAC,QAAA,UACAC,MAAA,KACAC,kBAAA,KACAC,iBAAA,OACA5C,KAAA,SAAA6C,GACAP,EAAA/D,cHvIEzD,EAAQW,OAAOoB,SGwIjBiG,MAAA,SAAAC,OAKAC,cAjFA,SAiFAzF,GACAjC,KAAAiD,aHxJO,SAAsBhB,GAC3B,IAjBuBmD,EAAKC,EACtBE,EAgBFC,EAAWhG,EAAQgB,IAAIe,MAK3B,OAtB4B8D,EAkBF,SAACI,GACzB,OAAOA,IAASxD,IAlBZsD,GADiBH,EAkBPI,GAjBEE,UAAUL,KACf,GACXD,EAAIO,OAAOJ,EAAO,GAkBpB/F,EAAQM,IAAIyB,EAAYiE,GACjBA,EGkJTmC,CAAA1F,IAMA2F,WAxFA,WAwFA,IAAAC,EAAA7H,KACAA,KAAA+C,UAGA/C,KAAAkC,OACMF,EAANhC,KAAAiC,MAAAjC,KAAAkC,MAAAwC,KAAA,SAAAC,GACAkD,EAAA/E,OAAA+E,EAAA/E,OAAAwD,OAAAuB,EAAA3C,WAAAP,EAAA/B,OACAiF,EAAA1C,UAAAR,EAAA/B,QAEA5C,KAAAyD,MAAAqE,SAAAC,mBAKAC,UAtGA,SAsGAC,GACA,0DAAAA,EAAA,wBAKAC,WA5GA,SA4GAzC,GAEA,GAAAA,EAAAS,KAAA,CACA,IAAAiC,EAAA,IAAAC,GACAxG,GAAA6D,EAAAwC,UACApG,KAAA4D,EAAA4C,aAEArI,KAAAsI,QAAArC,MACAsC,KAAA,wBAAA9C,EAAAwC,YAEAjI,KAAAgE,UAAAmE,QAGAnI,KAAAwI,WAAA/C,OCrOegD,GADEC,OAFjB,WAA0B,IAAAC,EAAA3I,KAAa4I,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,WAAqBF,EAAA,OAAYE,YAAA,iBAA2BF,EAAA,OAAYE,YAAA,iBAA2BF,EAAA,aAAkBG,OAAOC,cAAA,KAAAC,YAAA,WAA2CC,UAAWC,MAAA,SAAAC,GAAyB,OAAAA,EAAApD,KAAAqD,QAAA,QAAAZ,EAAAa,GAAAF,EAAAG,QAAA,WAAAH,EAAApK,IAAA,SAAsF,KAAeyJ,EAAA3D,OAAA2D,EAAA1G,MAAA,QAAqCyH,OAAQC,MAAAhB,EAAA,MAAAvH,SAAA,SAAAwI,GAA2CjB,EAAA1G,MAAA2H,GAAcC,WAAA,WAAqBf,EAAA,OAAYgB,aAAajI,KAAA,OAAAkI,QAAA,SAAAJ,MAAAhB,EAAA7F,OAAA,OAAA+G,WAAA,kBAAkFG,IAAA,UAAAhB,YAAA,UAAAiB,OAA8CC,OAAAvB,EAAA3F,cAAA,QAAqC8F,EAAA,eAAoBkB,IAAA,WAAAf,OAAsBkB,gBAAAxB,EAAAf,WAAAwC,oBAAAzB,EAAA5F,QAAAsH,aAAA,IAAiF1B,EAAA2B,GAAAtK,KAAA,gBAAAyF,EAAAF,GAA2C,OAAAuD,EAAA,KAAeE,YAAA,YAAAuB,IAA4BC,MAAA,SAAAlB,GAAyB,OAAAX,EAAAT,WAAAzC,OAA8BqD,EAAA,OAAYE,YAAA,sBAAgCvD,EAAAS,KAAqXyC,EAAA8B,KAArX3B,EAAA,OAAyBE,YAAA,oBAA8BF,EAAA,OAAYG,OAAOyB,KAAA,OAAAC,IAAA,sGAAAC,MAAA,KAAAV,OAAA,MAAqJQ,KAAA,SAAa/B,EAAAkC,GAAA,KAAA/B,EAAA,QAAyBE,YAAA,mBAA6BL,EAAAkC,GAAAlC,EAAAmC,GAAArF,EAAA5D,SAAA8G,EAAAkC,GAAA,KAAA/B,EAAA,QAAqDE,YAAA,oBAA8BL,EAAAkC,GAAAlC,EAAAmC,GAAArF,EAAA0C,aAAAQ,EAAAkC,GAAA,KAAApF,EAAA,KAAAqD,EAAA,OAA6EE,YAAA,kCAA4CF,EAAA,OAAYiC,aAAaC,gBAAA,SAAwB/B,OAAQyB,KAAA,OAAAC,IAAAhC,EAAAX,UAAAvC,EAAAwC,YAAkDyC,KAAA,SAAa/B,EAAAkC,GAAA,KAAA/B,EAAA,QAAyBE,YAAA,mBAA6BL,EAAAkC,GAAAlC,EAAAmC,GAAArF,EAAA4C,eAAAM,EAAAkC,GAAA,KAAA/B,EAAA,QAA2DE,YAAA,oBAA8BL,EAAAkC,GAAA,KAAAlC,EAAAmC,GAAArF,EAAAwF,SAAA,OAAAtC,EAAAmC,GAAArF,EAAAyF,eAAAvC,EAAA8B,WAAkF,SAAA9B,EAAAkC,GAAA,KAAA/B,EAAA,OAAiCgB,aAAajI,KAAA,OAAAkI,QAAA,SAAAJ,MAAA,IAAAhB,EAAA1G,MAAA4H,WAAA,cAA0Eb,YAAA,mBAA+BF,EAAA,OAAAA,EAAA,OAAsBE,YAAA,WAAqBF,EAAA,MAAWE,YAAA,UAAoBL,EAAAkC,GAAA,UAAAlC,EAAAkC,GAAA,KAAA/B,EAAA,OAAyCE,YAAA,eAA0BL,EAAA2B,GAAA3B,EAAA,iBAAAlD,GAAqC,OAAAqD,EAAA,QAAkBE,YAAA,UAAAuB,IAA0BC,MAAA,SAAAlB,GAAyB,OAAAX,EAAA9B,SAAApB,EAAA0F,OAA8BxC,EAAAkC,GAAAlC,EAAAmC,GAAArF,EAAA0F,QAA2B,SAAAxC,EAAAkC,GAAA,KAAA/B,EAAA,OAAiCgB,aAAajI,KAAA,OAAAkI,QAAA,SAAAJ,MAAAhB,EAAA1F,aAAAjE,QAAA,IAAA2J,EAAA1G,MAAA4H,WAAA,qCAA4Hb,YAAA,oBAAgCF,EAAA,OAAYE,YAAA,gBAAAuB,IAAgCC,MAAA7B,EAAA5B,gBAA0B+B,EAAA,QAAAH,EAAAkC,GAAA,cAAAlC,EAAAkC,GAAA,KAAA/B,EAAA,OAAwDkB,IAAA,cAAAhB,YAAA,kBAA+CL,EAAA2B,GAAA3B,EAAA,sBAAAlD,GAA0C,OAAAqD,EAAA,MAAgByB,IAAIC,MAAA,SAAAlB,GAAyB,OAAAX,EAAA9B,SAAApB,OAA4BqD,EAAA,KAAUE,YAAA,iBAA2BF,EAAA,QAAaE,YAAA,eAAyBL,EAAAkC,GAAA,KAAA/B,EAAA,QAAyBE,YAAA,gBAA0BL,EAAAkC,GAAAlC,EAAAmC,GAAArF,MAAAkD,EAAAkC,GAAA,KAAA/B,EAAA,QAAgDE,YAAA,sBAAAuB,IAAsCC,MAAA,SAAAlB,GAAkD,OAAzBA,EAAA8B,kBAAyBzC,EAAAjB,cAAAjC,aAAuC,KAAAkD,EAAAkC,GAAA,KAAA/B,EAAA,OAA6BgB,aAAajI,KAAA,OAAAkI,QAAA,SAAAJ,MAAA,KAAAhB,EAAA1G,QAAA0G,EAAA7F,OAAA9D,OAAA6K,WAAA,iCAAoHb,YAAA,cAA0BF,EAAA,OAAYG,OAAO0B,IAAA,oGAAAC,MAAA,QAAAV,OAAA,WAA4IvB,EAAAkC,GAAA,KAAA/B,EAAA,KAAAH,EAAAkC,GAAA,SAAAlC,EAAAkC,GAAA,KAAA/B,EAAA,KAAAH,EAAAkC,GAAA,aAAAlC,EAAAmC,GAAAnC,EAAA1G,OAAA,uBAAA0G,EAAAkC,GAAA,KAAA/B,EAAA,oBAEx5GuC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE7I,EACA8F,GATF,EAVA,SAAAgD,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/7.a03573338f8810f6c04a.js","sourcesContent":["/**\n * good-storage v1.1.0\n * (c) 2018 ustbhuangyi\n */\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n/**\n * 本地存储实现,封装localStorage和sessionStorage\n */\nvar store = {\n  /* eslint-disable no-undef */\n  version: '1.1.0',\n  storage: window.localStorage,\n  session: {\n    storage: window.sessionStorage\n  }\n};\n\nvar api = {\n  set: function set(key, val) {\n    if (this.disabled) {\n      return;\n    }\n    if (val === undefined) {\n      return this.remove(key);\n    }\n    this.storage.setItem(key, serialize(val));\n    return val;\n  },\n  get: function get(key, def) {\n    if (this.disabled) {\n      return def;\n    }\n    var val = deserialize(this.storage.getItem(key));\n    return val === undefined ? def : val;\n  },\n  has: function has(key) {\n    return this.get(key) !== undefined;\n  },\n  remove: function remove(key) {\n    if (this.disabled) {\n      return;\n    }\n    this.storage.removeItem(key);\n  },\n  clear: function clear() {\n    if (this.disabled) {\n      return;\n    }\n    this.storage.clear();\n  },\n  getAll: function getAll() {\n    if (this.disabled) {\n      return null;\n    }\n    var ret = {};\n    this.forEach(function (key, val) {\n      ret[key] = val;\n    });\n    return ret;\n  },\n  forEach: function forEach(callback) {\n    if (this.disabled) {\n      return;\n    }\n    for (var i = 0; i < this.storage.length; i++) {\n      var key = this.storage.key(i);\n      callback(key, this.get(key));\n    }\n  }\n};\n\n_extends(store, api);\n\n_extends(store.session, api);\n\nfunction serialize(val) {\n  return JSON.stringify(val);\n}\n\nfunction deserialize(val) {\n  if (typeof val !== 'string') {\n    return undefined;\n  }\n  try {\n    return JSON.parse(val);\n  } catch (e) {\n    return val || undefined;\n  }\n}\n\ntry {\n  var testKey = '__storejs__';\n  store.set(testKey, testKey);\n  if (store.get(testKey) !== testKey) {\n    store.disabled = true;\n  }\n  store.remove(testKey);\n} catch (e) {\n  store.disabled = true;\n}\n\nexport default store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_good-storage@1.1.0@good-storage/dist/storage.esm.js\n// module id = null\n// module chunks = ","import storage from 'good-storage'\n\nconst SEARCH_KEY = '__search__'\nconst SEARCH_MAX_LEN = 15\n\nconst PLAY_KEY = '__play__'\nconst PLAY_MAX_LEN = 200\n\nconst FAVORITE_KEY = '__favorite__'\nconst FAVORITE_MAX_LEN = 200\n\nfunction insertArray(arr, val, compare, maxLen) {\n  const index = arr.findIndex(compare)\n  if (index === 0) {\n    return\n  }\n  if (index > 0) {\n    arr.splice(index, 1)\n  }\n  arr.unshift(val)\n  if (maxLen && arr.length > maxLen) {\n    arr.pop()\n  }\n}\n\nfunction deleteFromArray(arr, compare) {\n  const index = arr.findIndex(compare)\n  if (index > -1) {\n    arr.splice(index, 1)\n  }\n}\n\nexport function saveSearch(query) {\n  let searches = storage.get(SEARCH_KEY, [])\n  insertArray(searches, query, (item) => {\n    return item === query\n  }, SEARCH_MAX_LEN)\n  storage.set(SEARCH_KEY, searches)\n  return searches\n}\n\nexport function deleteSearch(query) {\n  let searches = storage.get(SEARCH_KEY, [])\n  deleteFromArray(searches, (item) => {\n    return item === query\n  })\n  storage.set(SEARCH_KEY, searches)\n  return searches\n}\n\nexport function clearSearch() {\n  storage.remove(SEARCH_KEY)\n  return []\n}\n\nexport function loadSearch() {\n  return storage.get(SEARCH_KEY, [])\n}\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/cache.js","export default class Singer {\n  constructor({id, name}) {\n    this.id = id\n    this.name = name\n    this.avatar = `https://y.gtimg.cn/music/photo_new/T001R300x300M000${id}.jpg?max_age=2592000`\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/singer.js","import jsonp from '../common/js/jsonp'\n\n//搜索数据\nexport function getSearch (query, page) {\n  const URL = 'https://c.y.qq.com/soso/fcgi-bin/client_search_cp'\n  const PARAMS = {\n    format: 'jsonp',\n    w: query,\n    n: 20,\n    p: page,\n  }\n  const CALLBACKNAME = 'jsonpCallback'\n  return jsonp({url: URL, params: PARAMS, callback: CALLBACKNAME})\n}\n\n\n//获取热门关键词数据\nexport function getHotKey () {\n  const URL = 'https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg'\n  const PARAMS = {\n    g_tk: 5381,\n    uin: 0,\n    format: 'jsonp',\n    inCharset: 'utf-8',\n    outCharset: 'utf-8',\n    notice: 0,\n    platform: 'h5',\n    needNewCode: 1,\n    _: 1518414659356\n  }\n  const CALLBACKNAME = 'jsonpCallback'\n  return jsonp({ url: URL, params: PARAMS, callback: CALLBACKNAME })\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/search.js","<template>\n    <div class=\"page-search\">\n      <div class=\"search\">\n        <!--搜索框-->\n        <div class=\"search-input\">\n          <div class=\"search-input\">\n            <mt-search\n              @keyup.enter.native=\"search(query,1,true)\"\n              v-model=\"query\"\n              cancel-text=\"取消\"\n              placeholder=\"搜索歌曲、歌手\">\n\n              <div class=\"wrapper\" ref=\"wrapper\" :style=\"{ height: wrapperHeight + 'px' }\" v-show=\"result.length\">\n                <mt-loadmore :bottom-method=\"loadBottom\" :bottom-all-loaded=\"hasMore\" :auto-fill=\"true\"\n                             ref=\"loadmore\">\n                  <!--搜索结果-->\n                  <a class=\"mint-cell\" v-for=\"(item,index) in this.result\" @click=\"selectItem(item)\">\n                    <div class=\"mint-cell-wrapper\">\n                      <!--歌曲-->\n                      <div class=\"mint-cell-title\" v-if=\"!item.type\">\n                        <img slot=\"icon\" src=\"https://y.gtimg.cn/mediastyle/mobile/yqq_v5/img/search_sprite.png?max_age=19830212&d=20151105145423\" width=\"24\" height=\"24\">\n                        <span class=\"mint-cell-text\">{{item.name}}</span>\n                        <span class=\"mint-cell-label\">{{item.singer}}</span>\n                      </div>\n                      <!--歌手-->\n                      <!--目前在用的搜索api只能搜索到歌曲-->\n                      <div class=\"mint-cell-title result-singer\" v-if=\"item.type\">\n                        <img slot=\"icon\" :src='singerImg(item.singermid)' style=\"border-radius: 999px\">\n                        <span class=\"mint-cell-text\">{{item.singername}}</span>\n                        <span class=\"mint-cell-label\">单曲{{item.songnum}}  专辑{{item.albumnum}}</span>\n                      </div>\n\n                    </div>\n                  </a>\n\n                </mt-loadmore>\n              </div>\n            </mt-search>\n\n            <!--热门搜索词-->\n            <div v-show=\"query==''\" class=\"hotkey-wrapper\">\n              <div>\n                  <div class=\"hotkey\">\n                    <h3 class=\"title\">热门搜索</h3>\n                    <div class=\"hotkey-tags\">\n                      <span class=\"tag-key\" v-for=\"item in hotkeys\" @click=\"setQuery(item.k)\">{{item.k}}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n            <!--搜索历史-->\n            <div  v-show=\"historyQuery.length && query==''\" class=\"history-wrapper\">\n              <div class=\"history-clear\" @click=\"clearHistory\"><span>清除搜索记录</span></div>\n              <div ref=\"historyList\" class=\"search-history\">\n                <li v-for=\"item in historyQuery\" @click=\"setQuery(item)\">\n                  <a class=\"history-item\">\n                    <span class=\"icon-clock\"></span>\n                    <span class=\"history-key\">{{item}}</span>\n                    <span class=\"iconfont icon-close\" @click.stop=\"deleteHistory(item)\"></span>\n                  </a>\n                </li>\n              </div>\n            </div>\n\n            <!--无搜索结果-->\n            <div class=\"no-result\" v-show=\"!query=='' && !result.length\">\n              <img src=\"https://y.gtimg.cn/mediastyle/mobile/yqq_v5/img/search_null.png?max_age=19830212&d=20151105145423\" width=\"106px\" height=\"105px\">\n              <p>无匹配</p>\n              <p>很抱歉，没有找到与“{{query}}”相关的结果。</p>\n            </div>\n          </div>\n\n          </div>\n      </div>\n      <router-view></router-view>\n    </div>\n</template>\n\n<script>\n  import {SUCCESS} from \"data/config\"\n  import {createSong} from \"common/js/song\"\n  import {saveSearch,loadSearch,clearSearch,deleteSearch} from \"common/js/cache\"\n  import Singer from 'common/js/singer'\n  import {mapMutations,mapActions} from 'vuex'\n  import {getHotKey,getSearch} from \"data/search\";\n\n  export default {\n\n    data(){\n      return {\n        hotkeys:[],//热门搜索词\n        query:'',//当前搜索内容\n        page:1,//当前搜索的页数\n        result: [],//搜索结果\n        hasMore:false,\n        wrapperHeight:0,\n        historyQuery:loadSearch(),//历史搜索记录\n      }\n    },\n    components:{\n    },\n\n    created(){\n      this.getHotKey()\n\n    },\n    mounted() {\n      this.wrapperHeight = document.documentElement.clientHeight - this.$refs.wrapper.getBoundingClientRect().top;\n    },\n\n    methods:{\n      ...mapMutations({\n        setSinger: 'SET_SINGER'\n      }),\n      ...mapActions(['insertSong']),\n\n\n      //获取热门词\n      getHotKey(){\n        getHotKey().then((res) => {\n          if (res.code === SUCCESS) {\n            this.hotkeys=res.data.hotkey.slice(0, 10)\n          }\n        })\n      },\n\n      // 搜索\n      search(query,page){\n        getSearch(query,page).then((res) => {\n          this.result=this.initResult(res.data)\n          this.checkMore(res.data)\n        })\n\n\n        //保存搜索历史\n        saveSearch(query)\n      },\n\n      //初始化搜索结果\n      initResult(data) {\n        let ret = []\n        if (data.zhida && data.zhida.singerid) {\n          ret.push({...data.zhida, ...{type: 'singer'}})\n        }\n        if (data.song) {\n          let arr = this.initSongs(data.song.list)\n          ret = ret.concat(arr)\n        }\n        return ret\n      },\n\n      initSongs(list) {\n        let ret = []\n        list.forEach((musicData) => {\n          if (musicData.songid && musicData.albummid) {\n              ret.push(createSong(musicData))\n          }\n        })\n        return ret\n      },\n\n\n      checkMore(data) {\n        const song = data.song\n        if (!song.list.length || (song.curnum + song.curpage * 20) > song.totalnum) {\n          this.hasMore = true\n        }\n      },\n\n      //执行搜索\n      setQuery(query) {\n        query=query.trim()\n        this.query = query\n        this.search(query,1,true)\n        this.historyQuery=loadSearch()\n      },\n\n      //清空历史搜索\n      clearHistory(){\n        this.$messagebox.confirm('',{\n          message: '清空搜索历史？',\n          title: '提示',\n          confirmButtonText: '确定',\n          cancelButtonText: '取消'\n        }).then(action=>{\n          this.historyQuery=clearSearch()\n        }).catch(err => {   //取消的回调\n        });\n      },\n\n      //删除一条历史搜索\n      deleteHistory(query){\n        this.historyQuery=deleteSearch(query)\n      },\n\n\n\n      //上拉加载\n      loadBottom(){\n        if (this.hasMore) {\n          return\n        }\n        this.page++\n        getSearch(this.query,this.page).then((res) => {\n          this.result=this.result.concat(this.initResult(res.data))\n          this.checkMore(res.data)\n        })\n        this.$refs.loadmore.onBottomLoaded()\n      },\n\n\n      //搜索结果歌手头像\n      singerImg(singermid){\n        return `https://y.gtimg.cn/music/photo_new/T001R68x68M000${singermid}.jpg?max_age=2592000`\n      },\n\n\n      //点击搜索结果跳转到歌手或播放歌曲\n      selectItem(item){\n        //歌手\n        if (item.type){\n          const singer = new Singer({\n            id: item.singermid,\n            name: item.singername,\n          })\n          this.$router.push({\n            path: `/search/SingerDetail/${item.singermid}`\n          })\n          this.setSinger(singer)\n        }else{\n          //播放歌曲\n          this.insertSong(item)\n        }\n      }\n    },\n\n  }\n</script>\n\n<style lang=\"stylus\">\n\n  .page-search\n    background: #fff\n    width: 100%\n    position: absolute\n    top: 88px\n    bottom: 0px\n    .mint-actionsheet\n      bottom: 60px\n    .search\n      width: 100%;\n      position: absolute;\n      top: 0;\n      bottom: 0px;\n    .search-input\n      width: 100%;\n      position: absolute;\n      top: 0;\n      bottom: 0px;\n      .hotkey-wrapper\n        position: relative;\n        top: 50px;\n      .history-wrapper\n        position: relative;\n        top: 40px;\n    .mint-search\n      height: unset;\n      width: 100%;\n      position: absolute;\n      top: 0;\n      bottom: 0px;\n      .mint-search-list\n        padding-top: unset;\n        width: 100%;\n        position: absolute;\n        top: 0;\n        bottom: 0px;\n        .mint-search-list-warp\n          width: 100%;\n          position: absolute;\n          top: 55px;\n          bottom: 0px;\n          .wrapper\n            .mint-loadmore\n              overflow: unset;\n              width: 100%;\n              position: absolute;\n              top: 0;\n              bottom: 0px;\n              .mint-loadmore-content\n                width: 100%;\n                position: absolute;\n                top: 0;\n                bottom: 0px;\n        .mint-cell-title\n          span\n            padding-left: 16px\n            padding-bottom: 7px\n          img\n            position: relative\n            top: 10px\n        .mint-cell-label\n          margin-left: 26px\n      .mint-cell\n        margin-bottom: 6px\n        border-bottom: solid 1px #e5e5e5\n        .mint-cell-value\n          font-size: 22px\n          margin-right: 10px\n          margin-bottom: 16px\n        .result-singer\n          img\n            width: 38px\n            height: 38px\n          .mint-cell-label\n            padding-left: 23px\n          .mint-cell-text\n            padding-left: 7px\n      .mint-searchbar\n        background: #f4f4f4\n        .mint-searchbar-cancel\n          color: #555\n        .mint-searchbar-core\n          padding-left: 10px\n        .mintui-search\n          font-size: 18px\n\n    .hotkey\n      background: #fff\n      padding: 15px 15px 10px 15px\n      .title\n        color: rgba(0,0,0,.6)\n        font-size: 14px\n\n    .tag-key\n      display: inline-block\n      font-size: 14px\n      padding: 0 10px\n      height: 30px\n      line-height: 30px\n      color: #000\n      border: 1px solid rgba(0,0,0,.6)\n      border-radius: 99px\n      word-break: keep-all\n      margin-bottom: 10px\n      margin-right: 14px\n\n\n   .no-result\n     position: relative\n     padding: 170px 0 0\n     text-align: center\n     color: #808080\n     p\n       font-size: 18px\n       font-weight: normal\n\n   .search-history\n     height: 300px;\n     overflow: scroll;\n     li\n      border-top: 1px solid #ededed\n      padding: 0 15px\n      list-style: none\n      .history-item\n        position: relative;\n        display: block;\n        height: 44px;\n        line-height: 44px;\n        .icon-clock\n          position: absolute;\n          left: 0;\n          top: 12px;\n          width: 20px;\n          height: 20px;\n          background-image: url('https://y.gtimg.cn/mediastyle/mobile/yqq_v5/img/clock_ic.png?max_age=19830212&d=20151105145423');\n          background-repeat: no-repeat;\n          background-size: cover;\n          text-indent: -999px;\n        .history-key\n          position: absolute;\n          left: 40px;\n          right: 50px;\n          display: block;\n          height: 44px;\n          line-height: 44px;\n          color: #000;\n          font-size: 14px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        .icon-close\n          position: absolute;\n          right: 0;\n          width: 30px\n\n   .history-clear\n     position: relative\n     left: 75%\n     display: inline-block\n     line-height: 44px\n     color: #47c88a\n\n   .wrapper\n     overflow: scroll\n\n\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-search\"},[_c('div',{staticClass:\"search\"},[_c('div',{staticClass:\"search-input\"},[_c('div',{staticClass:\"search-input\"},[_c('mt-search',{attrs:{\"cancel-text\":\"取消\",\"placeholder\":\"搜索歌曲、歌手\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search(_vm.query,1,true)}},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.result.length),expression:\"result.length\"}],ref:\"wrapper\",staticClass:\"wrapper\",style:({ height: _vm.wrapperHeight + 'px' })},[_c('mt-loadmore',{ref:\"loadmore\",attrs:{\"bottom-method\":_vm.loadBottom,\"bottom-all-loaded\":_vm.hasMore,\"auto-fill\":true}},_vm._l((this.result),function(item,index){return _c('a',{staticClass:\"mint-cell\",on:{\"click\":function($event){return _vm.selectItem(item)}}},[_c('div',{staticClass:\"mint-cell-wrapper\"},[(!item.type)?_c('div',{staticClass:\"mint-cell-title\"},[_c('img',{attrs:{\"slot\":\"icon\",\"src\":\"https://y.gtimg.cn/mediastyle/mobile/yqq_v5/img/search_sprite.png?max_age=19830212&d=20151105145423\",\"width\":\"24\",\"height\":\"24\"},slot:\"icon\"}),_vm._v(\" \"),_c('span',{staticClass:\"mint-cell-text\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('span',{staticClass:\"mint-cell-label\"},[_vm._v(_vm._s(item.singer))])]):_vm._e(),_vm._v(\" \"),(item.type)?_c('div',{staticClass:\"mint-cell-title result-singer\"},[_c('img',{staticStyle:{\"border-radius\":\"999px\"},attrs:{\"slot\":\"icon\",\"src\":_vm.singerImg(item.singermid)},slot:\"icon\"}),_vm._v(\" \"),_c('span',{staticClass:\"mint-cell-text\"},[_vm._v(_vm._s(item.singername))]),_vm._v(\" \"),_c('span',{staticClass:\"mint-cell-label\"},[_vm._v(\"单曲\"+_vm._s(item.songnum)+\"  专辑\"+_vm._s(item.albumnum))])]):_vm._e()])])}),0)],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query==''),expression:\"query==''\"}],staticClass:\"hotkey-wrapper\"},[_c('div',[_c('div',{staticClass:\"hotkey\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"热门搜索\")]),_vm._v(\" \"),_c('div',{staticClass:\"hotkey-tags\"},_vm._l((_vm.hotkeys),function(item){return _c('span',{staticClass:\"tag-key\",on:{\"click\":function($event){return _vm.setQuery(item.k)}}},[_vm._v(_vm._s(item.k))])}),0)])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.historyQuery.length && _vm.query==''),expression:\"historyQuery.length && query==''\"}],staticClass:\"history-wrapper\"},[_c('div',{staticClass:\"history-clear\",on:{\"click\":_vm.clearHistory}},[_c('span',[_vm._v(\"清除搜索记录\")])]),_vm._v(\" \"),_c('div',{ref:\"historyList\",staticClass:\"search-history\"},_vm._l((_vm.historyQuery),function(item){return _c('li',{on:{\"click\":function($event){return _vm.setQuery(item)}}},[_c('a',{staticClass:\"history-item\"},[_c('span',{staticClass:\"icon-clock\"}),_vm._v(\" \"),_c('span',{staticClass:\"history-key\"},[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('span',{staticClass:\"iconfont icon-close\",on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteHistory(item)}}})])])}),0)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.query=='' && !_vm.result.length),expression:\"!query=='' && !result.length\"}],staticClass:\"no-result\"},[_c('img',{attrs:{\"src\":\"https://y.gtimg.cn/mediastyle/mobile/yqq_v5/img/search_null.png?max_age=19830212&d=20151105145423\",\"width\":\"106px\",\"height\":\"105px\"}}),_vm._v(\" \"),_c('p',[_vm._v(\"无匹配\")]),_vm._v(\" \"),_c('p',[_vm._v(\"很抱歉，没有找到与“\"+_vm._s(_vm.query)+\"”相关的结果。\")])])],1)])]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-417a6f89\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-417a6f89\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-417a6f89\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}